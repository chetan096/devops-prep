pipeline {
   agent any
   tools{
      maven 'Maven3'
	    jdk 'Java'
   }
   stages {
     stage('Checkout'){
	     steps {
	      checkout scm
	     } 
     }
	 stage('Junits'){
	   steps {
	     echo 'Run unit test cases'
		 bat 'mvn -f nagp-assignment-devops/pom.xml test'
	   }
	 }
	 stage('Sonar Analysis'){
	    steps {
		   withSonarQubeEnv('Test_Sonar') {
                  bat 'mvn -f nagp-assignment-devops/pom.xml sonar:sonar'
                }
		}
	 }
	 stage('Build'){
	    steps {
		  bat 'mvn -f nagp-assignment-devops/pom.xml clean install'
		}
	 }
   }
}